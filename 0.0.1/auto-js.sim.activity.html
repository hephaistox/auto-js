<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>auto-js.sim.activity documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">auto-js</span> <span class="project-version">0.0.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auto-js</span></div></div></li><li class="depth-2 branch"><a href="auto-js.js.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>js</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rendering</span></div></div></li><li class="depth-3"><a href="auto-js.rendering.printer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>printer</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>rep</span></div></div></li><li class="depth-3"><a href="auto-js.rep.repetition.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repetition</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>sim</span></div></div></li><li class="depth-3 branch current"><a href="auto-js.sim.activity.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>activity</span></div></a></li><li class="depth-3"><a href="auto-js.sim.js.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>js</span></div></a></li><li class="depth-4"><a href="auto-js.sim.js.xchart.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xchart</span></div></a></li><li class="depth-2"><a href="auto-js.start.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>start</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="auto-js.sim.activity.html#var-add-iteration"><div class="inner"><span>add-iteration</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-add-iteration-past-event"><div class="inner"><span>add-iteration-past-event</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-add-snapshot"><div class="inner"><span>add-snapshot</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-create-new-entity"><div class="inner"><span>create-new-entity</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-destroy-entity"><div class="inner"><span>destroy-entity</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-end-route"><div class="inner"><span>end-route</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-ends-production"><div class="inner"><span>ends-production</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-enter-input-stock"><div class="inner"><span>enter-input-stock</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-enter-production"><div class="inner"><span>enter-production</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-errors"><div class="inner"><span>errors</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-first-entity-out"><div class="inner"><span>first-entity-out</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-get-entity"><div class="inner"><span>get-entity</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-last-entity-in"><div class="inner"><span>last-entity-in</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-next-event-bucket"><div class="inner"><span>next-event-bucket</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-next-op"><div class="inner"><span>next-op</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-on-new-product"><div class="inner"><span>on-new-product</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-on-production-end"><div class="inner"><span>on-production-end</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-print-error"><div class="inner"><span>print-error</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-print-errors"><div class="inner"><span>print-errors</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-print-event"><div class="inner"><span>print-event</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-print-output"><div class="inner"><span>print-output</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-print-status"><div class="inner"><span>print-status</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-resource-next-event"><div class="inner"><span>resource-next-event</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-show-past"><div class="inner"><span>show-past</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-start"><div class="inner"><span>start</span></div></a></li><li class="depth-1"><a href="auto-js.sim.activity.html#var-start-route"><div class="inner"><span>start-route</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">auto-js.sim.activity</h1><div class="doc"><div class="markdown"><p>Simulate a jobshop with a simulation by activity.</p>
</div></div><div class="public anchor" id="var-add-iteration"><h3>add-iteration</h3><div class="usage"><code>(add-iteration model new-bucket)</code></div><div class="doc"><div class="markdown"><p>Adds an iteration event</p>
</div></div></div><div class="public anchor" id="var-add-iteration-past-event"><h3>add-iteration-past-event</h3><div class="usage"><code>(add-iteration-past-event model)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-add-snapshot"><h3>add-snapshot</h3><div class="usage"><code>(add-snapshot model)</code></div><div class="doc"><div class="markdown"><p>Adds an event with a resource snapshot</p>
</div></div></div><div class="public anchor" id="var-create-new-entity"><h3>create-new-entity</h3><div class="usage"><code>(create-new-entity model entity-source-id)</code></div><div class="doc"><div class="markdown"><p>Creates a new entity from <code>entity-source-id</code></p>
<p>A source should have * <code>create-fn</code> optional a function * <code>nb-entity</code> * <code>next-event</code> * <code>nb-max</code> * <code>waiting-time</code></p>
<p>:errors <code>new-entity-exception</code>, <code>create-unkown-entity-id</code> :past-events <code>create-new-entity</code> :stats <code>entities-in</code> how many new entities have been created and <code>entities-nb</code> how many are in the system</p>
</div></div></div><div class="public anchor" id="var-destroy-entity"><h3>destroy-entity</h3><div class="usage"><code>(destroy-entity model entity)</code></div><div class="doc"><div class="markdown"><p>Destroys an entity from <code>entity-source-id</code></p>
<p>:errors : none :stats : <code>entities throughputs</code> store the list of duration of the entity in the system <code>entities-out</code> and <code>entities-nb</code> :past-events <code>destroy-entity</code></p>
</div></div></div><div class="public anchor" id="var-end-route"><h3>end-route</h3><div class="usage"><code>(end-route model entity)</code></div><div class="doc"><div class="markdown"><p>The <code>entity</code> ends its route, the entity is destroyed</p>
<p>:errors : <code>route-ends-was-not-started</code> :stats : <code>routes route-id throughputs</code> :past-events <code>end-route</code></p>
</div></div></div><div class="public anchor" id="var-ends-production"><h3>ends-production</h3><div class="usage"><code>(ends-production model entity)</code></div><div class="doc"><div class="markdown"><p>Production of <code>entity</code> is ended, if exists one <code>waiting-product</code> is picked and its production started.</p>
<p>:errors : <code>:no-current-operation</code> :past-events : <code>:ends-production</code> :stats <code>:resources m :nb-in-stock</code>, <code>:resources m :occupation</code></p>
</div></div></div><div class="public anchor" id="var-enter-input-stock"><h3>enter-input-stock</h3><div class="usage"><code>(enter-input-stock model entity)</code></div><div class="doc"><div class="markdown"><p>Product enters the input-stock and directly the production slot if available, or waits in stock instead.</p>
<p>:errors <code>no-current-operation</code> :past-events <code>enter-input-stock-wait-in-stock</code> :stats <code>:resources m :nb-in-stock</code></p>
</div></div></div><div class="public anchor" id="var-enter-production"><h3>enter-production</h3><div class="usage"><code>(enter-production model entity)</code></div><div class="doc"><div class="markdown"><p>Product starts its production on machine.</p>
<p>:errors : <code>current-operation-missing</code>, <code>machine-is-busy-already</code> :past-events :  <code>enter-production</code> :stats <code>:resources m :occupation</code></p>
<p>Otherwise machine is updated with <code>starts</code> <code>ends</code> and <code>next-event</code>. And <code>entities</code> is set to <code>in-production</code>.</p>
</div></div></div><div class="public anchor" id="var-errors"><h3>errors</h3><div class="usage"><code>(errors {:keys [entity-sources], :as model})</code></div><div class="doc"><div class="markdown"><p>Check model consistency</p>
</div></div></div><div class="public anchor" id="var-first-entity-out"><h3>first-entity-out</h3><div class="usage"><code>(first-entity-out model)</code></div><div class="doc"><div class="markdown"><p>Return the date when the first entity get out the system</p>
</div></div></div><div class="public anchor" id="var-get-entity"><h3>get-entity</h3><div class="usage"><code>(get-entity model entity-id during-kw)</code></div><div class="doc"><div class="markdown"><p>Returns a pair of * <code>entity</code> found ( <code>nil</code> if not) * <code>model</code> updated with an error if not</p>
<p>:errors <code>unkown-entity-id</code> :past-events none :stats none</p>
</div></div></div><div class="public anchor" id="var-last-entity-in"><h3>last-entity-in</h3><div class="usage"><code>(last-entity-in model)</code></div><div class="doc"><div class="markdown"><p>Return the date when the last entity get in the system</p>
</div></div></div><div class="public anchor" id="var-next-event-bucket"><h3>next-event-bucket</h3><div class="usage"><code>(next-event-bucket model)</code></div><div class="doc"><div class="markdown"><p>Bucket of the next entity to create, <code>nil</code> otherwise</p>
</div></div></div><div class="public anchor" id="var-next-op"><h3>next-op</h3><div class="usage"><code>(next-op model entity)</code></div><div class="doc"><div class="markdown"><p><code>Entity</code> is moving to its next operation, if there is no next operation, the route is ended.</p>
<p>Next operation is resolved and set to <code>current-operation</code>.</p>
<p>:stats : When route is ended: <code>:routes route-id :throughputs</code> :errors : <code>route-ends-was-not-started</code> :past-events : <code>:next-op</code> and <code>end-route</code></p>
</div></div></div><div class="public anchor" id="var-on-new-product"><h3>on-new-product</h3><div class="usage"><code>(on-new-product model)</code></div><div class="doc"><div class="markdown"><p>For entity-source that should appear now (<code>next-event=bucket</code>), the product is created, the route is started and its first operation executed</p>
<ul>
<li>:errors <code>:next-event-missed</code> if an event should have been done in the past <code>:source-empty</code> if the source exists but has never something to create</li>
<li>:past-events: none</li>
<li>:stats: none</li>
</ul>
</div></div></div><div class="public anchor" id="var-on-production-end"><h3>on-production-end</h3><div class="usage"><code>(on-production-end model)</code></div><div class="doc"><div class="markdown"><p>For all resources with a <code>next-event</code> at current <code>bucket</code>, ends the production of entities occupying the machine.</p>
</div></div></div><div class="public anchor" id="var-print-error"><h3>print-error</h3><div class="usage"><code>(print-error {:keys [error-id _bucket _entity entity-source-id], :as error})</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-print-errors"><h3>print-errors</h3><div class="usage"><code>(print-errors {:keys [errors], :as _model})</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-print-event"><h3>print-event</h3><div class="usage"><code>(print-event event)</code></div><div class="doc"><div class="markdown"><p>Print the <code>event</code> if it is matching one of this events.</p>
</div></div></div><div class="public anchor" id="var-print-output"><h3>print-output</h3><div class="usage"><code>(print-output model)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-print-status"><h3>print-status</h3><div class="usage"><code>(print-status {:keys [sim-status], :as _model})</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-resource-next-event"><h3>resource-next-event</h3><div class="usage"><code>(resource-next-event model)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-show-past"><h3>show-past</h3><div class="usage"><code>(show-past model)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-start"><h3>start</h3><div class="usage"><code>(start {:keys [resources entity-sources bucket], :or {bucket 0}, :as model} prng)</code></div><div class="doc"><div class="markdown"><p>Starts the simulation.</p>
<p>Can be used after a previous run has been stopped.</p>
</div></div></div><div class="public anchor" id="var-start-route"><h3>start-route</h3><div class="usage"><code>(start-route model entity route-id)</code></div><div class="doc"><div class="markdown"><p>The <code>entity</code> starts the route <code>route-id</code>, that should be found in route.</p>
<p>:errors : <code>:route-not-existing</code> and <code>route-is-empty</code> and when route is ended: <code>:routes route-id :throughputs</code> <code>route-ends-was-not-started</code> :past-events : <code>:start-route</code> :stats : <code>:routes route-id :route-nb</code></p>
</div></div></div></div></body></html>